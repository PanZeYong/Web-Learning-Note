# <center> 字符串的扩展

## 一、字符的 Unicode 表示法

### 1、概述

JavaScript 允许采用 `\uxxxx` 形式表示一个字符，其中 **"xxxx"** 表示字符的码点。但是这种表示方式有局限性，即只局限于 `\u0000` - `\uFFFF`。如果超出这个范围，必须采用两个双字节的形式表示，但是有时会出现解析不正确的现象；然而在 ES6 中，只要将码点放入大括号，就能正确解读该字符。

```javascript
"\u20BB7"

// ES6 写法
"\u{20BB7}"
```

### 2、JavaScript 提供 6 种方法表示字符

```javascript
'\z' === 'z'  // true'\172' === 'z' // true'\x7A' === 'z' // true'\u007A' === 'z' // true'\u{7A}' === 'z' // true
```

### 3、方法

- **charCodeAt()**：分别返回前两个字节和后两个字节的值。（ES5）

- **codePointAt()**：能正确处理 4 个字节储存的字符，返回一个字符的码点。（ES6）

- **String.fromCharCode()**：用于从码点返回对应字符，不能识别 32 位的 UTF-16 字符。（ES5）

- **String.fromCodePoint()**：可以识别 `0xFFFF` 的字符，弥补了 `String.fromCharCode` 方法的不足。（ES6）

## 二、字符串的遍历器接口

### 1、概述

ES6 为字符串添加了遍历器接口，使得字符串可以被 for...of 循环遍历，而且还有一个优点是可以识别大于 `0xFFFF` 的码点，传统的 `for` 循环是无法识别的。

### 2、方法

- **charAt()**：返回字符串给定位置的字符。该方法不能识别码点大于 `0xFFFF` 的字符。

- **normalize()**：将字符的不同表示方法统一为同样的方式，这称为 Unicode 正规化。（ES6）

    该方法可接收一个参数：

    - `NFC`：默认参数，表示 “标准等价合成”（Normalization Form Canonical Composition），返回多个简单字符的合成字符。所谓 “标准等价” 指的是视觉和语义上的等价。

    - `NFD`：表示 “标准等价分解”（Normalization Form Canonical Decomposition），即在标准等价的前提下，返回合成字符分解的多个简单字符。

    - `NFKC`：表示 “兼容等价合成”（Normalization Form Compatibility Composition），返回合成字符。所谓 “兼容等价” 指的是语义上存在等价，但是视觉上不等价。

    - `NFKD`：表示 “兼容等价分解”（Normalization Form Compatibility Decomposition），即在兼容等价的前提下，返回合成字符分解的多个简单字符。

- **includes()**：返回布尔值，表示是否找到了参数字符串。

- **startsWith()**：返回布尔值，表示参数字符串是否在源字符串的头部。

- **endsWith()**：返回布尔值，表示参数字符串是否在源字符串的尾部。

- **repeat()**：返回一个新字符串，表示将原字符串重复 `n` 次。

    接收的参数解释如下：
    
    - 如果参数是小数，会被取整；

    - 如果参数是负数或者 `Infinity`，会报错；

    - 如果参数是 0 到 -1 之间的小数，则等同于 0；

    - 参数 `NaN` 等同于 0；

    - 如果参数是字符串，则会先转为数字。
 
- **padStart()**：用于头部补全。接收两个参数：第一个参数用来指定字符串的最小长度；第二个参数是用来补全的字符串。

- **padEnd()**：用于尾部补全。接收两个参数：第一个参数用来指定字符串的最小长度；第二个参数是用来补全的字符串。

    注意点：
    
    - 如果原字符串的长度，等于或大于指定的最小长度，则返回原字符串。

    - 如果用来补全的字符串与原字符串两者的长度之和超过了指定的最小长度，则会截去超出位数的补全字符串。

    - 如果省略第二个参数，则会用空格补全长度。

    用途：
    
    - 为数值补全指定位数。

        ```javascript
        '1'.padStart(10, '0');    // "0000000001"
        ```
        
    - 提示字符串格式。

        ```javascript
        '12'.padStart(10, 'YYYY-MM-DD') // "YYYY-MM-12"
        ```

  