# <center> let 和 const 命令

## 一、let 命令

### 1、概述
let 用来声明变量，用法与 var 类似，let 命令所声明的变量的作用域只在所在的代码块有效。

```javascript
{
	let a = 1;
	var b = 2;
}

console.log('a: ' + a);    // 报错
console.log('b: ' + b);
```

### 2、特点

- **不存在变量提升**：变量在使用之前，必须先声明，否则会抛出错误。

    ```javascript
    console.log(bar);    // undefined
    console.log(foo);    // 报错
    
    var bar = 2;
    let bar = 2;
    ```
    
    var 命令声明的变量存在变量提升，即脚本一旦开始运行，变量就已经存在了，只是没有赋值而已，所以输出 undefined。
    
- **暂时性死区（TDZ：temporal dead zone）**：在代码块内，使用 let 命令声明变量时，在此之前该变量是不可用的。

    ```javascript
    var tmp = 234;
    
    if (true) {
        tmp = '123456';    // ReferenceError
        let tmp;
    }
    ```
    
- **不允许重复声明**：在相同作用域内，let 命令不允许重复声明同一个变量；不能在函数内部声明参数。

    ```javascript
    // 报错
    function test() {
        let a = 10;
        var a = 1;
    }
    
    function func(arg) {
        let arg;    // 报错
    }
    ```
    
- **块级作用域**


### 3、ES5 规定

- ES5 只有全局作用域和函数作用域，没有块级作用域。

- 函数只能在顶层作用域和函数作用域之中声明，不能在块级作用域声明。
  
### 4、ES6 规定

- 如果区块中存在 let 和 const 命令，这个区块对这些命令声明的变量，从一开始就形成了封闭作用域。凡是在声明之前就使用这些变量，就会报错。

- 暂时性死区和修订变量提升，主要是为了减少运行时错误，防止在变量声明前就使用这个变量，从而导致意料之外的行为。

- ES6 引入块级作用域，明确允许在块级作用域之中声明函数。（前提是使用大括号）

### 注意点

- 应该避免在块级作用域内声明函数。如果确实需要，也应该写成函数表达式，而不是函数声明语句。